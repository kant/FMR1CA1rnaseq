---
title: "Usando y Enseñando R para Investigación Reproducible"
#subtitle: "mis 10 mejores consejos"
author: |
  | Rayna M. Harris 
  | Twitter: @raynamharris
  | página web: https://raynamharris.github.io
  |
date: |
  | 27 Marzo 2018
  | R-Ladies Buenos Aires
output:
  beamer_presentation:
    color: seahorse
    fig_caption: no
    font: structurebold
    #incremental: true
    keep_tex: true
    md_extensions: +footnotes
    includes:
      in_header: header_pagenrs.tex
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,
                      fig.path = '../figures/10_talk/')
library(tidyverse) # for subsetting data 
library(car) # for fancy ANOVA
library(cowplot) # for "easier"" ggplot themes
library(plyr) # data wrangling
library(colorblindr) # for color blind test
```

# La programación es importante porque permite automatizar tareas.

![](../figures/10_talk/trabajo-tiempo-8.png){width=50%}

[^3b] 

[^3]: http://www.mclibre.org/consultar/python/otros/lenguajes-programacion.html

# R permite estadísticas reproducibles y visualización de datos

![](../figures/10_talk/tiempo-01.png){width=50%}

# La enseñanza colaborativa también ahorra tiempo

![](../figures/10_talk/tiempo-02.png){width=50%}

# Mi filosofía

# Mi filosofía

>-  Yo creo que la mejor manera de aprender es enseñando
>-  Yo creo que todos aprenden más cuando la ciencia y la educación están abiertas 
>-  Recuerda que nadie es re buena al principio, pero todas mejoramos con la práctica
>-  Recuerda que vos podés hacer lo que quieras



# Deseo 1: Desarrolla tu propia paleta de colores

Colorbrewer[^1a] te ayuda a elegir colores amigables para daltónicos

![](../figures/10_talk/colorbrewer.png){width=75%}

[^1a]: http://colorbrewer2.org/

# Ejemplos de paletas de colores

```{r ejemplo, out.width = "225px"}
df <- read.table(header=TRUE, text='
 cond yval
    A 2
    B 2.5
    C 1.6
')

one <- ggplot(df, aes(x=cond, y=yval, fill=cond)) + geom_bar(stat="identity")

two <- ggplot(df, aes(x=cond, y=yval, fill=cond)) + geom_bar(stat="identity") + 
    scale_fill_manual(values=c("red", "green", "blue"))

three <- ggplot(df, aes(x=cond, y=yval, fill=cond)) + geom_bar(stat="identity") + 
    scale_fill_manual(values=c("#d95f02", "#1b9e77", "#7570b3"))

allthree <- plot_grid(one,two,three, nrow =1, labels = c(" Predeterminado", "     Basico", "  Personalizado"))
allthree

```

-  Basico: `+ scale_fill_manual(values=c("red", "green", "blue"))`
-  Personalizado: `+ scale_fill_manual(values=c("#d95f02", "#1b9e77", "#7570b3"))`

# Convertir HEX a RGB si fuera necesario

![](../figures/10_talk/orange.png){width=50%}

![](../figures/10_talk/teal.png){width=50%}


![](../figures/10_talk/purple.png){width=50%}
[^1b]

[^1b]: https://www.webpagefx.com/web-design/hex-to-rgb/

# Confirmá que tu paleta es amigable con los daltónicos

colorblindr[^1c] simula deficiencias de visión del color

```{r, colorblindgrid, out.width = "225px"}

p2 <- edit_colors(three, protan)
p3 <- edit_colors(three, deutan)
p4 <- edit_colors(three, tritan)

plot_grid(three, p2, p3, p4, labels = c("   original", "    protan", "    deutan", "    tritan"))
```

[^1c]: https://github.com/clauswilke/colorblindr

# Deseo 2: Usa leyendas gráficas

```{r timespent, warning = F, message = F, fig.height= 5}
behavior <- read.csv("../results/behaviordata.csv", header = T)
behavior$APA2 <- factor(behavior$APA2, levels = c("yoked-consistent","consistent", "yoked-conflict","conflict")) ## relevel then rename factors treatment
behavior$Genotype <- factor(behavior$Genotype, levels = c("WT","FMR1KO")) # relevel genotype

proptime <- read.csv("../results/behaviorproptime.csv", header = T)
proptime$APA2 <- factor(proptime$APA2, levels = c("yoked-consistent","consistent", "yoked-conflict","conflict")) ## relevel then rename factors treatment
proptime$Genotype <- factor(proptime$Genotype, levels = c("WT","FMR1KO")) # relevel genotype
proptime$variable <- factor(proptime$variable, 
          levels = c("pTimeTarget", "pTimeCCW", "pTimeOPP", "pTimeCW"))

behavior$APA2 <- plyr::revalue(behavior$APA2, c("consistent" = "consistente", "conflict" = "conflicto", 
                                          "yoked-consistent" = "yoked-consistente", 
                                          "yoked-conflict" = "yoked-conflicto"))
proptime$APA2 <- plyr::revalue(proptime$APA2, c("consistent" = "consistente", "conflict" = "conflicto", 
                                          "yoked-consistent" = "yoked-consistente", 
                                          "yoked-conflict" = "yoked-conflicto"))
proptime$variable <- plyr::revalue(proptime$variable, c("pTimeTarget" = "objetivo", "pTimeCCW" = "izquierda", 
                                          "pTimeOPP" = "opuesto",  "pTimeCW" = "derecho"))

timespent <- proptime %>%
   # filter(APA2 %in% c("consistente","conflicto")) %>%
      filter(Genotype %in% c("WT")) %>%
    filter(TrainSessionComboNum == 6 ) %>%
  ggplot(aes(x = APA2, y = value,fill = variable)) + 
    geom_bar(position = "fill",stat = "identity") +
    scale_x_discrete(name="Grupo de entrenamiento") + 
  #facet_wrap(~APA2, nrow=1) +
  theme_cowplot(font_size = 14, line_size = 0.25) +
  theme(legend.title=element_blank()) +
  #theme(legend.position="none") +
  scale_y_continuous(name= "Proporción de tiempo ") +
  scale_fill_manual(values = c("#d01c8b", "#e5f5e0" ,"#a1d99b", "#31a354")) + 
  geom_hline(yintercept=c(0.25,0.50, 0.75), color="black" , linetype="dashed")
timespent
```

>- ¿Qué significa "objetivo", "izquierda", "opuesto" y "derecho"?
>- ¿Por qué el rosa "objetivo"?
>- ¿Por qué hay líneas discontinuas?

# Deseo 2: Usa leyendas gráficas

```{r timespent2, warning = F, message = F, fig.height= 5}
image <- ggdraw() + draw_image("../figures/10_talk/talk_pista.png", scale = 1)

ggdraw() +
  draw_plot(timespent, x = 0, y = 0, width = 0.82, height = 1) +
  draw_plot(image, x = 0.7, y = 0.5, width = 0.3, height = 0.6)
```

>- "objetivo", "izquierda", etc. son cuadrantes de una arena
>- Yo quería mostrar un uso desproporcionado del espacio
>- Use **cowplot**[^2] para agregar imágenes dentro de R

[^2]: **cowplot** https://cran.r-project.org/web/packages/cowplot/index.html

# Deseo 3: Usa *R Markdown* para la reproducibilidad 

![](../figures/10_talk/Rmarkdown.png){width=50%}
[^3] 

[^3]: https://rmarkdown.rstudio.com/authoring_quick_tour.html


# Deseo 4: Usa el control de versiones para colaborar con otros y con vos en el futuro

![](../figures/10_talk/git-graphic-01.png){width=75%}
[^4]

[^4]: http://technetnepal.net/blogs/shirishamaharjan/archive/2017/05/07/expand-horizons-change-attitudes-git-and-github-workshop.aspx


# Deseo 5: Documenta tu flujo de trabajo

Porque probablemente sea único y complejo

![](https://www.blogdelfotografo.com/wp-content/uploads/2016/05/mark-516279_1920.jpg){width=75%}
[^5a]

[^5a]: https://www.blogdelfotografo.com/workflow-flujo-trabajo-foto/

# Por ejemplo, podés enumerar los comandos por orden de operación

![](../figures/10_talk/unixworkflow.png){width=75%}
[^5b]

[^5b]:  https://github.com/raynamharris/FMR1CA1rnaseq

# Probá múltiples estrategias de organización y hace lo que funcione mejor para vos

![](../figures/10_talk/Rworkflow.png){width=75%}
[^5b]


# Punto medio resumen

- Deseo 1: Desarrolla tu propia paleta de colores
- Deseo 2: Usa leyendas gráficas
- Deseo 3: Usa *R Markdown* para la reproducibilidad 
- Deseo 4: Usa el control de versiones para la colaboración
- Deseo 5: Documenta tu flujo de trabajo

# Deseo 6: Me ayudás a mejorar las nuevas lecciones en español de Software Carpentry

![](../figures/10_talk/R-gapminder-es.png)

# Soy voluntaria en Sofware Carpentry

![](../figures/10_talk/swc1.png)

![](../figures/10_talk/swc2.png)

![](../figures/10_talk/swc3.png)
[^2]

[^2]: https://software-carpentry.org/lessons/

# Como podés ayudarme

>- Leer y comentar o editar en GitHub[^6a]
>- Particpar en el **Bug BBQ**[^6b] el Abril 11 y 12
>- Hace videos de vos leyendo y codificando junto con la lección[^6c]

[^6a]: https://swcarpentry.github.io/r-novice-gapminder-es/
[^6b]: https://carpentries.github.io/2018-04-bug-bbq/ 
[^6c]: https://www.youtube.com/watch?v=rQkfLaTdAvw

# Deseo 7: Convertirse en una instructora certificada

- Ahora, no hay instructoras en Argentina :(
- Aplicá aquí: http://carpentries.github.io/instructor-training/

![](../figures/10_talk/joinus.png){width=75%}
[^7] 

[^7]: https://software-carpentry.org/team/

# Deseo 8: Organizar y/o asistir a un taller

![](../figures/10_talk/workshops.png){width=75%}
[^8] 

[^8]: https://software-carpentry.org/workshops/


# ¡Gracias por tu atención! ¡Mantengámonos en contacto!

Twitter: @raynamharris

Email: rayna.harris@gmail.com
